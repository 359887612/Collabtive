Vue.config.silent=!0;
function createView(b){var a={items:[],pages:[],limit:pagination.itemsPerPage,offset:0,currentPage:1,itemsCount:0,itemType:b.itemType,dependencies:b.dependencies,url:b.url},c=new Vue({el:"#"+b.el,data:a}),d=new XMLHttpRequest;d.onloadstart=function(a){a=document.getElementById("progress"+b.el);null!==a&&void 0!==a&&(a.style.display="block")};d.onload=function(){var b=JSON.parse(d.responseText);a.items=b.items;a.itemsCount=b.count;b=pagination.listPages(b.count);a.pages=b;c.$dispatch("iloaded")};d.onloadend=
function(a){a=document.getElementById("progress"+b.el);null!==a&&void 0!==a&&(a.style.display="none")};d.open("GET",a.url);d.send();return c}
function updateView(b,a){void 0===a&&(a=!0);var c=b.url;0<b.limit&&(c+="&limit="+b.limit);0<b.offset&&(c+="&offset="+b.offset);var d=new XMLHttpRequest;d.onloadstart=function(a){a=document.getElementById("progress"+b.$el.id);null!==a&&(a.style.display="block")};d.onload=function(){var c=JSON.parse(d.responseText);Vue.set(b,"items",c.items);Vue.set(b,"pages",pagination.listPages(c.count));if(1==a&&(c=b.$get("dependencies"),0<c.length))for(var e=0;e<c.length;e++)Vue.set(c[e],"limit",b.limit),Vue.set(c[e],
"offset",b.offset),updateView(c[e],c[e].url)};d.onloadend=function(a){a=document.getElementById("progress"+b.$el.id);null!==a&&(a.style.display="none")};d.open("GET",c);d.send()}
var pagination={itemsPerPage:10,listPages:function(b){b=Math.ceil(b/this.itemsPerPage);for(var a=[],c=0;c<b;c++){var d=c+1;a.push({index:d,limit:d*this.itemsPerPage})}return a},loadPage:function(b,a){var c=a*this.itemsPerPage-this.itemsPerPage;Vue.set(b,"limit",this.itemsPerPage);Vue.set(b,"offset",c);Vue.set(b,"currentPage",a);updateView(b,!0)},loadNextPage:function(b){var a=b.$get("currentPage"),c=Math.ceil(b.$get("itemsCount")/this.itemsPerPage),a=a+1;a>c&&(a=c);this.loadPage(b,a)},loadPrevPage:function(b){var a=
b.$get("currentPage")-1;1>a&&(a=1);this.loadPage(b,a)}};
function submitForm(b){var a=b.currentTarget,c=a.action,d=validateCompleteForm(a);console.log("validates:"+d);b.stopPropagation();b.preventDefault();if(1==d){b="";for(i=0;i<a.elements.length;i++)d=a.elements[i],void 0!=d.value&&(b+="&"+d.name+"="+d.value);a=new XMLHttpRequest;a.onloadstart=function(a){document.getElementById("progress"+formView.$el).style.display="block"};a.onload=function(){updateView(formView,!1);systemMessage.added(formView.$get("itemType"))};a.onloadend=function(a){document.getElementById("progress"+
formView.$el).style.display="none"};a.open("POST",c);a.setRequestHeader("Content-type","application/x-www-form-urlencoded");a.send(b)}}function startWait(b){document.getElementById(b).style.display="block"}function stopWait(b){document.getElementById(b).style.display="none"}closeEndcolor="#377814";deleteEndcolor="#c62424";function confirmDelete(b,a,c,d){1==confirm(b)&&deleteElement(a,c,d)}
function deleteElement(b,a,c){var d=new XMLHttpRequest;d.onload=function(){"ok"==d.responseText&&(removeRow(b,deleteEndcolor),void 0!=c&&(updateView(c),systemMessage.deleted(c.$get("itemType"))))};d.open("GET",a);d.send()}function closeElement(b,a,c){var d=new XMLHttpRequest;d.onload=function(){"ok"==d.responseText&&(removeRow(b,closeEndcolor),void 0!=c&&(updateView(c),systemMessage.closed(c.$get("itemType"))))};d.open("GET",a);d.send()}
function removeRow(b,a){var c=document.getElementById(b);null!=c&&(c.style.backgroundColor="#FFFFFF",Velocity(c,{backgroundColor:a,backgroundColorAlpha:.6},{complete:function(){Velocity(c,"fadeOut",{delay:1E3,duration:2500})}}))}var paginationComponent=Vue.extend({props:["view","pages","currentPage"],template:'<template v-if=\'pages.length > 1\'><span id="paging" style="margin-left:10px;"> <button style="float:none;font-size:9pt;margin:0 1px 0 1px;" onclick="pagination.loadPrevPage({{view}})"><<</button><span id="page{{page.index}}" v-for="page in pages" style="margin-left:2px;"> <button v-bind:class="currentPage == page.index ? \'paginationActive\' : \'paginationInactive\' " onclick="pagination.loadPage({{view}},{{page.index}});">{{page.index}}</button> </span> <button style="float:none;font-size:9pt;margin:0 1px 0 1px;" onclick="pagination.loadNextPage({{view}})">>></button> </span></template>'});
Vue.component("pagination",paginationComponent);var progressComponent=Vue.extend({props:["block","loader"],template:'<div class="progress" id="progress{{block}}" style="float:left;display:none;">    <img src="templates/standard/theme/standard/images/symbols/{{loader}}"/> </div>'});Vue.component("loader",progressComponent);Vue.filter("truncate",function(b,a){return b.length>=a?b.substr(0,a)+"...":b});
