function Node(a,b,c,d,e,g,f,h,k,l){this.id=a;this.pid=b;this.name=c;this.url=d;this.title=e;this.target=g;this.icon=f;this.daysLeft=l;this.iconOpen=h;this._isOpen=k||!1;this._firstNode=this._lastNode=this._currentNode=!1;this._autoIncrement=0;this._parentNode}
function dTree(a){this.config={target:null,folderLinks:!0,useSelection:!0,useCookies:!0,useLines:!0,useIcons:!0,useStatusText:!1,closeSameLevel:!1,inOrder:!1};this.icon={root:"templates/standard/theme/standard/images/symbols/empty.gif",folder:"templates/standard/theme/standard/images/symbols/folder.gif",folderOpen:"templates/standard/theme/standard/images/symbols/folderopen.gif",node:"templates/standard/theme/standard/images/symbols/page.gif",empty:"templates/standard/theme/standard/images/symbols/empty.gif",
line:"templates/standard/theme/standard/images/symbols/line.svg",join:"templates/standard/theme/standard/images/symbols/join.svg",joinBottom:"templates/standard/theme/standard/images/symbols/join-bottom.svg",plus:"templates/standard/theme/standard/images/symbols/plus-line.svg",plusBottom:"templates/standard/theme/standard/images/symbols/plus-bottom.svg",minus:"templates/standard/theme/standard/images/symbols/minus-line.svg",minusBottom:"templates/standard/theme/standard/images/symbols/minus-bottom.svg",
nlPlus:"templates/standard/theme/standard/images/symbols/nolines_plus.gif",nlMinus:"templates/standard/theme/standard/images/symbols/minus.svg"};this.obj=a;this.allNodes=[];this.aIndent=[];this.root=new Node(-1);this.selectedNode=null;this.completed=this.selectedFound=!1}dTree.prototype.add=function(a,b,c,d,e,g,f,h,k,l){this.allNodes[this.allNodes.length]=new Node(a,b,c,d,e,g,f,h,k,l)};dTree.prototype.openAll=function(){this.oAll(!0)};dTree.prototype.closeAll=function(){this.oAll(!1)};
dTree.prototype.toString=function(){var a='<div class="dtree">\n';document.getElementById?(this.config.useCookies&&(this.selectedNode=this.getSelected()),a+=this.addNode(this.root)):a+="Browser not supported.";this.selectedFound||(this.selectedNode=null);this.completed=!0;return a+"</div>"};
dTree.prototype.addNode=function(a){var b="",c=0;this.config.inOrder&&(c=a._autoIncrement);for(c;c<this.allNodes.length;c++)if(this.allNodes[c].pid==a.id){var d=this.allNodes[c];d._parentNode=a;d._autoIncrement=c;this.setCS(d);!d.target&&this.config.target&&(d.target=this.config.target);d._firstNode&&!d._isOpen&&this.config.useCookies&&(d._isOpen=this.isOpen(d.id));!this.config.folderLinks&&d._firstNode&&(d.url=null);this.config.useSelection&&d.id==this.selectedNode&&!this.selectedFound&&(d._currentNode=
!0,this.selectedNode=c,this.selectedFound=!0);b+=this.node(d,c);if(d._lastNode)break}return b};
dTree.prototype.node=function(a,b){var c;c='<div class="dTreeNode">'+this.indent(a,b);this.config.useIcons&&(a.icon||(a.icon=this.root.id==a.pid?this.icon.root:a._firstNode?this.icon.folder:this.icon.node),a.iconOpen||(a.iconOpen=a._firstNode?this.icon.folderOpen:this.icon.node),this.root.id==a.pid&&(a.icon=this.icon.root,a.iconOpen=this.icon.root),this.root.id!=a.pid&&(c+='<img id="i'+this.obj+b+'" src="'+(a._isOpen?a.iconOpen:a.icon)+'" alt="" style = "height:27px;width:27px;" />'));a.url?(c+='<a id="s'+
this.obj+b+'" class="'+(this.config.useSelection?a._currentNode?"nodeSel":"node":"node")+'" href="'+a.url+'"',a.title&&(c+=' title="'+a.title+'"'),a.target&&(c+=' target="'+a.target+'"'),this.config.useSelection&&(a._firstNode&&this.config.folderLinks||!a._firstNode)&&(c+=' onclick="javascript: '+this.obj+".s("+b+');"'),"number"==typeof a.daysLeft&&0>a.daysLeft&&(c+=' style = "color:#be4c43 "'),c+=">"):this.config.folderLinks&&a.url||!a._firstNode||a.pid==this.root.id||(c+='<a href="javascript: '+
this.obj+".o("+b+');" class="node">');c+=a.name;if(a.url||(!this.config.folderLinks||!a.url)&&a._firstNode)c+="</a>";c+="</div>";a._firstNode&&(c+='<div id="d'+this.obj+b+'" class="clip" style="display:'+(this.root.id==a.pid||a._isOpen?"block":"none")+';">',c+=this.addNode(a),c+="</div>");this.aIndent.pop();return c};
dTree.prototype.indent=function(a,b){var c="";if(this.root.id!=a.pid){for(var d=0;d<this.aIndent.length;d++)c+='<img src="'+(1==this.aIndent[d]&&this.config.useLines?this.icon.line:this.icon.empty)+'" alt="" style = "height:26px;width:26px;" />';a._lastNode?this.aIndent.push(0):this.aIndent.push(1);a._firstNode?(c+='<a href="javascript: '+this.obj+".o("+b+');"><img id="j'+this.obj+b+'" src="',c=this.config.useLines?c+(a._isOpen?a._lastNode&&this.config.useLines?this.icon.minusBottom:this.icon.minus:
a._lastNode&&this.config.useLines?this.icon.plusBottom:this.icon.plus):c+(a._isOpen?this.icon.nlMinus:this.icon.nlPlus),c+='" alt="" style = "height:26px;width:26px;"  /></a>'):c+='<img src="'+(this.config.useLines?a._lastNode?this.icon.joinBottom:this.icon.join:this.icon.empty)+'" alt="" style = "height:26px;width:26px;" />'}return c};
dTree.prototype.setCS=function(a){for(var b,c=0;c<this.allNodes.length;c++)this.allNodes[c].pid==a.id&&(a._firstNode=!0),this.allNodes[c].pid==a.pid&&(b=this.allNodes[c].id);b==a.id&&(a._lastNode=!0)};dTree.prototype.getSelected=function(){var a=this.getCookie("cs"+this.obj);return a?a:null};
dTree.prototype.s=function(a){if(this.config.useSelection){var b=this.allNodes[a];if((!b._firstNode||this.config.folderLinks)&&this.selectedNode!=a){if(this.selectedNode||0==this.selectedNode)eOld=document.getElementById("s"+this.obj+this.selectedNode),eOld.className="node";eNew=document.getElementById("s"+this.obj+a);eNew.className="nodeSel";this.selectedNode=a;this.config.useCookies&&this.setCookie("cs"+this.obj,b.id)}}};
dTree.prototype.o=function(a){var b=this.allNodes[a];this.nodeStatus(!b._isOpen,a,b._lastNode);b._isOpen=!b._isOpen;this.config.closeSameLevel&&this.closeLevel(b);this.config.useCookies&&this.updateCookie()};dTree.prototype.oAll=function(a){for(var b=0;b<this.allNodes.length;b++)this.allNodes[b]._firstNode&&this.allNodes[b].pid!=this.root.id&&(this.nodeStatus(a,b,this.allNodes[b]._lastNode),this.allNodes[b]._isOpen=a);this.config.useCookies&&this.updateCookie()};
dTree.prototype.openTo=function(a,b,c){if(!c)for(c=0;c<this.allNodes.length;c++)if(this.allNodes[c].id==a){a=c;break}a=this.allNodes[a];a.pid!=this.root.id&&a._parentNode&&(a._isOpen=!0,a._currentNode=b,this.completed&&a._firstNode&&this.nodeStatus(!0,a._autoIncrement,a._lastNode),this.completed&&b?this.s(a._autoIncrement):b&&(this._sn=a._autoIncrement),this.openTo(a._parentNode._autoIncrement,!1,!0))};
dTree.prototype.closeLevel=function(a){for(var b=0;b<this.allNodes.length;b++)this.allNodes[b].pid==a.pid&&this.allNodes[b].id!=a.id&&this.allNodes[b]._firstNode&&(this.nodeStatus(!1,b,this.allNodes[b]._lastNode),this.allNodes[b]._isOpen=!1,this.closeAllChildren(this.allNodes[b]))};
dTree.prototype.closeAllChildren=function(a){for(var b=0;b<this.allNodes.length;b++)this.allNodes[b].pid==a.id&&this.allNodes[b]._firstNode&&(this.allNodes[b]._isOpen&&this.nodeStatus(!1,b,this.allNodes[b]._lastNode),this.allNodes[b]._isOpen=!1,this.closeAllChildren(this.allNodes[b]))};
dTree.prototype.nodeStatus=function(a,b,c){eDiv=document.getElementById("d"+this.obj+b);eJoin=document.getElementById("j"+this.obj+b);this.config.useIcons&&(eIcon=document.getElementById("i"+this.obj+b),eIcon.src=a?this.allNodes[b].iconOpen:this.allNodes[b].icon);eJoin.src=this.config.useLines?a?c?this.icon.minusBottom:this.icon.minus:c?this.icon.plusBottom:this.icon.plus:a?this.icon.nlMinus:this.icon.nlPlus;eDiv.style.display=a?"block":"none"};
dTree.prototype.clearCookie=function(){var a=new Date((new Date).getTime()-864E5);this.setCookie("co"+this.obj,"cookieValue",a);this.setCookie("cs"+this.obj,"cookieValue",a)};dTree.prototype.setCookie=function(a,b,c,d,e,g){document.cookie=escape(a)+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+d:"")+(e?"; domain="+e:"")+(g?"; secure":"")};
dTree.prototype.getCookie=function(a){var b="",c=document.cookie.indexOf(escape(a)+"=");-1!=c&&(a=c+(escape(a)+"=").length,b=document.cookie.indexOf(";",a),b=-1!=b?unescape(document.cookie.substring(a,b)):unescape(document.cookie.substring(a)));return b};dTree.prototype.updateCookie=function(){for(var a="",b=0;b<this.allNodes.length;b++)this.allNodes[b]._isOpen&&this.allNodes[b].pid!=this.root.id&&(a&&(a+="."),a+=this.allNodes[b].id);this.setCookie("co"+this.obj,a)};
dTree.prototype.isOpen=function(a){for(var b=this.getCookie("co"+this.obj).split("."),c=0;c<b.length;c++)if(b[c]==a)return!0;return!1};Array.prototype.push||(Array.prototype.push=function(){for(var a=0;a<arguments.length;a++)this[this.length]=arguments[a];return this.length});Array.prototype.pop||(Array.prototype.pop=function(){lastElement=this[this.length-1];this.length=Math.max(this.length-1,0);return lastElement});
function renderTasklistTree(a){a=void 0!=a.items.open?a.items.open:a.items;if(void 0!=a)for(var b=0;b<a.length;b++){var c=a[b].ID,d=new dTree("projectTree"+a[b].ID);d.add(0,-1,"");var e=a[b].tasklists;if(0<e.length)for(var g=0;g<e.length;g++){var f=e[g],h=f.tasks;d.add("tl"+f.ID,0,f.name,"managetasklist.php?action=showtasklist&id="+f.project+"&tlid="+f.ID,"","","templates/standard/theme/standard/images/symbols/tasklist.png","templates/standard/theme/standard/images/symbols/tasklist.png",!0);if(0<
h.length)for(f=0;f<h.length;f++)d.add("ta"+h[f].ID,"tl"+h[f].liste,h[f].title,"managetask.php?action=showtask&tid="+h[f].ID+"&id="+h[f].project,"","","templates/standard/theme/standard/images/symbols/task.png","templates/standard/theme/standard/images/symbols/task.png","",h[f].daysleft)}e=a[b].messages;if(0<e.length)for(g=0;g<e.length;g++)d.add("msg"+e[g].ID,0,e[g].title,"managemessage.php?action=showmessage&id="+e[g].projekt+"&mid="+e[g].ID,e[g].text,"","templates/standard/theme/standard/images/symbols/msgs.png",
"templates/standard/theme/standard/images/symbols/msgs.png");cssId("milestoneTree_"+c).innerHTML=d;window["projectTree"+c]=d}};
