var projects={el:"desktopprojects",url:"index.php?action=myprojects",dependencies:[]};var tasks={el:"desktoptasks",url:"index.php?action=mytasks",dependencies:[]};var messages={el:"desktopmessages",url:"index.php?action=mymessages",dependencies:[]};var projectsView=createView(projects);var tasksView=createView(tasks);var msgsView=createView(messages);projectsView.$set("dependencies",[tasksView,msgsView]);
try{var accord_projects=new accordion("projecthead");var accord_tasks=new accordion("taskhead");var accord_msgs=new accordion("activityhead")}catch(e){}var form=document.getElementById("addprojectform");console.log(form);
form.addEventListener("submit",function(event){var validates=validateCompleteForm(form);var url=form.action;console.log("validates:"+validates);if(validates==true){var pbody="";for(i=0;i<form.elements.length;i++){var element=form.elements[i];console.log(element.name+" "+element.value);if(element.value!=undefined&&element.value!="")pbody+="&"+element.name+"="+element.value}var postbody=pbody.substring(1);console.log(postBody);new Ajax.Request(url,{method:"post",postBody:postbody,onSuccess:function(myData){var responseData=
JSON.parse(myData.responseText);myModel.items=responseData.items;var pages=pagination.listPages(responseData.count);myModel.pages=pages},onLoading:function(){startWait("progress"+myEl.el)},onComplete:function(){stopWait("progress"+myEl.el)},onFailure:function(){}});event.preventDefault()}else event.preventDefault()});changeshow("manageajax.php?action=newcal","thecal","progress");var accordIndex=new accordion("block_index",{classNames:{toggle:"acc_toggle",toggleActive:"acctoggle_active",content:"acc_content"}});
function activateAccordeon(theAccord){accordIndex.activate($$("#block_index .acc_toggle")[theAccord]);changeElements("#"+blockIds[theAccord]+" > a.win_block","win_none");setCookie("activeSlideIndex",theAccord)}var theBlocks=$$("#block_index > div .headline > a");openSlide=0;blockIds=[];
for(i=0;i<theBlocks.length;i++){var theId=theBlocks[i].getAttribute("id");blockIds.push(theId);theCook=readCookie("activeSlideIndex");if(theCook>0)openSlide=theCook;var theAction=theBlocks[i].getAttribute("onclick");theAction+="activateAccordeon("+i+");";theBlocks[i].setAttribute("onclick",theAction)}activateAccordeon(0);
